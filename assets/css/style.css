:root{
  --bg:#0a0b0f; --text:#e6f2ff; --muted:#8aa0b5;
  --line:rgba(125,227,255,.35);
  --acc1:#37ff8b; --acc2:#7de3ff; --acc3:#ff7de3; --acc4:#ffd166;
  --link:#7de3ff;
  --grad: linear-gradient(90deg, var(--acc2), var(--acc3) 50%, var(--acc1));
}
html[data-theme="light"]{
  --bg:#fefefe; --text:#0f172a; --muted:#6c7a89;
  --line:rgba(15,23,42,.18);
  --acc1:#0fbf66; --acc2:#0ea5b6; --acc3:#b74ab7; --acc4:#ef8f00;
  --link:#0ea5b6;
  --grad: linear-gradient(90deg, var(--acc2), var(--acc3) 50%, var(--acc1));
}

/* ===== base ===== */
*{box-sizing:border-box}
html{scroll-behavior:smooth}
body{
  margin:0; background:var(--bg); color:var(--text);
  font: 16px/1.7 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Inter, Roboto, Arial;
}

/* Make layout fill viewport & push footer to bottom */
html, body { height: 100%; }


/* subtle texture/glow */
body::before, body::after{
  content:""; position:fixed; inset:-20vmax; z-index:-2; pointer-events:none;
}
body::before{
  background:
    radial-gradient(60vmax 60vmax at 10% 10%, rgba(125,227,255,.06), transparent 60%),
    radial-gradient(60vmax 60vmax at 90% 20%, rgba(255,125,227,.06), transparent 60%),
    radial-gradient(70vmax 70vmax at 60% 100%, rgba(55,255,139,.05), transparent 60%);
  filter: saturate(120%);
}
body::after{
  background:
    repeating-linear-gradient(100deg, transparent 0 22px, rgba(255,255,255,.018) 22px 23px);
}

/* ===== header ===== */
.header{
  position:sticky; top:0; z-index:10; backdrop-filter: blur(8px);
  background: color-mix(in oklab, var(--bg), transparent 20%);
}
.h-wrap{max-width:1100px; margin:0 auto; padding:18px 24px 10px}
.brand{
  margin:0; font-weight:900; letter-spacing:.2px;
  background:var(--grad); -webkit-background-clip:text; background-clip:text; color:transparent;
  filter: drop-shadow(0 4px 18px rgba(125,227,255,.14));
}
.sub{margin:6px 0 0; color:var(--muted); font-size:14px}
.menu{margin-top:10px; display:flex; gap:16px; flex-wrap:wrap}
.menu a{
  color:var(--muted); text-decoration:none; position:relative; padding:2px 0;
}
.menu a::after{
  content:""; position:absolute; left:0; right:0; bottom:-2px; height:1.5px;
  background:var(--grad); transform:scaleX(0); transform-origin:left; transition:.25s;
}
.menu a:hover{color:var(--text)}
.menu a:hover::after{transform:scaleX(1)}
.toggle{
  margin-left:auto; border:1px solid var(--line); background:transparent; color:var(--text);
  padding:6px 10px; border-radius:999px; cursor:pointer; font-size:15px;
}

/* two-column layout for post content + ToC */
.page{
  display: grid;
  grid-template-columns: 1fr;   /* mobile: single column */
  gap: 16px;
  align-items: start;
}
.page-main{ min-width: 0; }     /* prevents overflow from code blocks */

@media (min-width: 980px){
  .page{
    grid-template-columns: minmax(0,1fr) 260px;
    column-gap: 16px;   /* content | toc */
  }
  .toc{
    position: sticky;
    top: 86px;        /* stays below your sticky header */
    margin-top: 0;    /* don't push it down */
    padding: 0;       /* keeps the free, no-box vibe */
    height: max-content;
    transform: translateX(-10px);   /* gentle nudge left toward content */
  }
}

/* ===== layout & rhythm ===== */
.wrap{max-width:1200px; margin:0 auto; padding:40px 24px}
.section{padding:52px 0}
.rule{
  height:1px; background:var(--grad); opacity:.65; filter:blur(.2px);
  margin:36px 0;
}

/* ===== hero free composition ===== */
.hero{
  display:flex; align-items:center; gap:18px; flex-wrap:wrap;
}
.avatar{
  width:96px; height:96px; border-radius:24px; object-fit:cover;
  border:2px solid color-mix(in oklab, var(--acc2), transparent 55%);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--acc1), transparent 70%);
}
.title{
  font-size:clamp(34px, 6vw, 64px);
  line-height:1.05; margin:.1em 0 .2em;
  text-wrap:balance;
}
.tagline{color:var(--muted); margin:.2em 0}

/* ===== prose (free, no frames) ===== */
.prose{max-width:72ch; font-size:17px}
.prose h2{
  font-size:clamp(22px, 3.2vw, 30px); margin:1.2em 0 .3em;
  text-shadow: 0 0 24px color-mix(in oklab, var(--acc2), transparent 85%);
}
.prose p{margin:.85em 0}
.prose a{color:var(--link); text-decoration:none}
.prose a:hover{text-decoration:underline wavy}
.note{
  padding-left:14px; border-left:3px solid color-mix(in oklab, var(--acc1), transparent 55%);
  color: color-mix(in oklab, var(--text), transparent 20%);
}
code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  padding:.1em .35em; border-radius:6px;
  background: color-mix(in oklab, var(--bg), #000 6%);
  border:1px solid var(--line);
}

/* Readable column for post content */
.post{
  max-width: 92ch;       /* comfy reading width */
  margin: 0 auto;        /* center in the page-main column */
}

/* Justified paragraphs with nice wrapping */
.post p{
  text-align: justify;
  text-justify: inter-word;
  hyphens: auto;
  overflow-wrap: anywhere;
  hanging-punctuation: first;  /* optional, looks tidy */
}

/* Make headings align with justified text flow */
.post h2, .post h3, .post h4{
  text-wrap: balance;
}

/* Images: scale down to column, keep aspect, centered */
.post img{
  max-width: 100%;
  height: auto;
  display: block;
  margin: 16px auto;
  border-radius: 12px; /* optional, looks nice with your theme */
}

/* Optional: figure + caption */
.post figure{ margin: 20px auto; }
.post figcaption{
  color: var(--muted);
  font-size: 13px;
  text-align: center;
  margin-top: 6px;
}

/* Optional: lists look better justified with a bit of left padding */
.post ul, .post ol{
  padding-left: 1.2em;
}

/* --- Code blocks inside posts: fit the column + horizontal scroll --- */

/* Rouge (Jekyll) often wraps code in .highlight > pre > code */
.post .highlight,
.post pre{
  max-width: 100%;              /* never exceed the text column */
  overflow-x: auto;             /* horizontal scroll if too long */
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch; /* smooth on mobile */
  background: color-mix(in oklab, var(--bg), #000 6%);
  border: 1px solid var(--line);
  border-radius: 12px;
  padding: 14px 16px;
  margin: 16px 0;
}

/* keep monospace + prevent weird justification in code blocks */
.post pre,
.post code{
  font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace;
  text-align: left;             /* not justified in code */
}

/* make sure extremely long tokens don't break layout */
.post code{
  white-space: pre;             /* preserve code layout */
  word-break: normal;
  overflow-wrap: normal;
}

/* optional: inline code wraps nicely without breaking the line height */
.post p code, .post li code{
  padding: .1em .35em;
  border-radius: 6px;
  background: color-mix(in oklab, var(--bg), #000 6%);
  border: 1px solid var(--line);
  white-space: break-spaces;    /* inline code can wrap if very long */
}

/* ===== post & table-of-contents ===== */
.post h1{margin:0 0 .2em}
.meta{color:var(--muted); font-size:13px; margin-bottom:14px}
.post h2, .post h3{scroll-margin-top: 90px;}

.toc{
  position:sticky; top:86px; align-self:start; height:max-content;
  margin-top:24px; padding:0; /* free look: no box */
}
.toc .toc-title{font-weight:800; margin-bottom:8px}
.toc .toc-link{
  display:block; padding:6px 0; margin:2px 0; text-decoration:none; color:var(--muted);
  border-bottom:1px solid color-mix(in oklab, var(--line), transparent 50%);
}
.toc .toc-link:last-child{border-bottom:none}
.toc .toc-link.level-3{padding-left:14px}
.toc .toc-link:hover{color:var(--text)}
.toc .toc-link.active{
  color:var(--text);
  text-decoration:underline;
  text-decoration-color: var(--acc1);
  text-decoration-thickness: 2px;
}

/* ===== footer ===== */

html, body {
  height: 100%;
  margin: 0;
}

.site-container {
  min-height: 100%;         
  display: flex;
  flex-direction: column;    
}

main.wrap {
  flex: 1 0 auto;                  
}

.footer{
  flex-shrink: 0;   /* stays at bottom */
  text-align:center;
  color:var(--muted);
  padding:16px 0 20px;  /* smaller if you want */
  border-top:1px solid var(--line);
}


/* category lists — clean bullets with neon vibe */
.cat-list{
  list-style:none; padding:0; margin:18px 0;
}
.cat-list li{
  position:relative; padding-left:18px; margin:12px 0 18px;
  border-bottom:1px solid color-mix(in oklab, var(--line), transparent 55%);
}
.cat-list li:last-child{ border-bottom:none; }
.cat-list li::before{
  content:"•";
  position:absolute; left:0; top:2px;
  color:var(--acc1); /* neon dot */
  font-weight:900; line-height:1;
}
.cat-list a{ color:var(--link); text-decoration:none; }
.cat-list a:hover{ text-decoration:underline wavy; }
.cat-list .meta{ color:var(--muted); font-size:13px; margin-left:6px; }
.cat-list .excerpt{ color: color-mix(in oklab, var(--text), transparent 20%); margin-top:6px; }

/* If header/footer still slip through, hide them when the post sets no-chrome */
.no-chrome .header,
.no-chrome .footer { display: none !important; }

/* Tighter spacing when chrome is hidden */
.no-chrome .wrap{ padding-top: 24px; }

@media (min-width: 980px){
  .no-chrome .toc{ top: 24px; }
}


/* spacing between language sections */
#Languages .prose + .prose { margin-top: 28px; }


/* make in-page jumps stop below sticky header on non-post pages too */
.prose h2, .prose h3 { scroll-margin-top: 90px; }

.no-chrome .prose h2,
.no-chrome .prose h3 { scroll-margin-top: 24px; }

