
:root{
  --bg:#0b0f13;
  --panel:#10161d;
  --text:#e8eef5;
  --muted:#8aa0b5;
  --border:#1e2937;

  --accent:#16ff6e;   /* neon green */
  --accent2:#6ae1ff;  /* cyan */
  --accent3:#ff99ff;  /* pink */

  --card-grad: linear-gradient(135deg, rgba(22,255,110,.08), rgba(106,225,255,.06) 60%, rgba(255,153,255,.07));
  --link:#23e06b;
}

/* Light theme */
html[data-theme="light"]{
  --bg:#ffffff;
  --panel:#f7fafc;
  --text:#0f172a;
  --muted:#607d8b;
  --border:#e2e8f0;

  --accent:#0bbd53;
  --accent2:#0aa3c7;
  --accent3:#b74ab7;

  --card-grad: linear-gradient(135deg, rgba(11,189,83,.10), rgba(10,163,199,.07) 60%, rgba(183,74,183,.08));
  --link:#0aa355;
}

*{box-sizing:border-box}
html{scroll-behavior:smooth}
body.page-root{
  margin:0;
  min-height:100svh;
  display:flex;
  flex-direction:column;
  background:var(--bg);
  color:var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Inter, Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
  line-height:1.65;
}

/* Layout shell */
.page-wrap{
  width:100%;
  max-width:1100px;
  margin:0 auto;
  padding:20px 24px 32px;
  display:grid;
  grid-template-columns: 1fr;
  gap:24px;
  flex:1;
}
.content{min-width:0}
.toc{display:none}
@media (min-width: 980px){
  .toc{display:block; width:280px}
  .page-wrap{grid-template-columns: 1fr 280px}
}

/* Header */
.site-header{
  position:sticky; top:0; z-index:10;
  backdrop-filter: blur(8px);
  background: color-mix(in oklab, var(--bg), transparent 25%);
  border-bottom:1px solid var(--border);
}
.brand{
  display:flex; align-items:center; gap:10px;
  max-width:1100px; margin:0 auto; padding:10px 24px 6px;
}
.site-title{font-weight:800; text-decoration:none; color:var(--text)}
.site-title:hover{color:var(--link)}
.theme-toggle{
  margin-left:auto; border:1px solid var(--border); background:var(--panel);
  padding:6px 10px; border-radius:10px; cursor:pointer; font-size:16px;
}

/* Nav */
.site-nav{
  max-width:1100px; margin:0 auto; padding:0 24px 10px;
}
.site-nav a{
  display:inline-block; margin-right:12px; padding:6px 10px;
  text-decoration:none; color:var(--muted);
  border:1px solid var(--border); border-radius:10px;
  background:var(--panel);
}
.site-nav a:hover{color:var(--text); outline:1px solid var(--accent)}

/* Hero (home) */
.hero{
  display:flex; align-items:center; gap:18px;
  padding:14px 16px; border:1px solid var(--border); border-radius:16px;
  background:var(--card-grad);
}
.avatar{
  width:88px; height:88px; border-radius:20px; object-fit:cover;
  border:2px solid var(--border);
  box-shadow: 0 0 0 2px color-mix(in oklab, var(--accent) 40%, transparent);
}
.hero-text h1{margin:.2em 0}
.tagline{color:var(--muted); margin:.2em 0}

/* Cards on home */
.cards{display:grid; grid-template-columns:repeat(auto-fit,minmax(240px,1fr)); gap:16px; margin-top:16px}
.card{
  border:1px solid var(--border); border-radius:16px; padding:16px; text-decoration:none;
  color:var(--text); background:var(--panel);
  box-shadow: 0 1px 0 rgba(0,0,0,.3), 0 0 0 1px rgba(255,255,255,.02) inset;
}
.card:hover{outline:2px solid var(--accent); transform:translateY(-1px); transition:.15s}

/* Post content */
.post h1{margin:0 0 .2em}
.meta{color:var(--muted); font-size:13px; margin-bottom:14px}
.post h2, .post h3{scroll-margin-top: 90px;}
.post pre, .post code{
  background: color-mix(in oklab, var(--panel), black 8%);
  border:1px solid var(--border); border-radius:12px;
}
.post pre{padding:12px; overflow:auto}

/* ToC */
.toc{
  position:sticky; top:84px; align-self:start;
  height:max-content; border:1px solid var(--border); border-radius:14px;
  background:var(--panel); padding:12px;
}
.toc-title{font-weight:700; margin-bottom:8px}
.toc-link{
  display:block; padding:6px 8px; margin:2px 0; text-decoration:none; color:var(--muted); border-radius:8px;
}
.toc-link.level-3{padding-left:16px}
.toc-link:hover{background: color-mix(in oklab, var(--accent) 12%, transparent)}
.toc-link.active{color:var(--text); outline:1px solid var(--accent); background: color-mix(in oklab, var(--accent) 10%, transparent)}

/* Links */
a{color:var(--link)}
a:hover{text-decoration:underline}

/* Footer pinned to bottom */
.site-footer{
  border-top:1px solid var(--border);
  padding:14px 0; text-align:center; color:var(--muted);
}

/* Fun subtle “hacking” accent */
.card, .post pre{
  box-shadow:
    0 0 0 1px rgba(255,255,255,.02) inset,
    0 0 18px rgba(22,255,110,.05),
    0 0 24px rgba(106,225,255,.04);
}
assets/js/site.js
js
Copy code
// Theme toggle (light/dark) with localStorage
(function(){
  const root = document.documentElement;
  const btn = document.getElementById('themeToggle');
  const saved = localStorage.getItem('theme');
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

  function applyTheme(t){
    root.setAttribute('data-theme', t);
    if (btn) btn.textContent = t === 'dark' ? '☀️' : '🌙';
  }

  applyTheme(saved || (prefersDark ? 'dark' : 'light'));

  if (btn) {
    btn.addEventListener('click', () => {
      const next = (root.getAttribute('data-theme') === 'dark') ? 'light' : 'dark';
      localStorage.setItem('theme', next);
      applyTheme(next);
    });
  }
})();

// Smooth scroll for in-page anchors
document.addEventListener('click', function(e){
  const a = e.target.closest('a[href^="#"]');
  if (!a) return;
  const id = decodeURIComponent(a.getAttribute('href').slice(1));
  const el = document.getElementById(id);
  if (el) {
    e.preventDefault();
    el.scrollIntoView({ behavior: 'smooth', block: 'start' });
    history.replaceState(null, '', '#' + id);
  }
});

// Build a ToC on post pages from h2/h3 headings
(function(){
  const toc = document.getElementById('toc');
  if (!toc) return;

  const headings = Array.from(document.querySelectorAll('.post h2, .post h3'));
  if (!headings.length) return;

  // Ensure IDs for headings
  headings.forEach(h => {
    if (!h.id) h.id = h.textContent.trim().toLowerCase().replace(/[^\w]+/g, '-');
  });

  const list = document.createElement('nav');
  list.className = 'toc-inner';
  list.innerHTML = '<div class="toc-title">On this page</div>';

  headings.forEach(h => {
    const a = document.createElement('a');
    a.href = '#' + h.id;
    a.textContent = h.textContent;
    a.className = 'toc-link level-' + (h.tagName === 'H2' ? '2' : '3');
    list.appendChild(a);
  });

  toc.appendChild(list);

  // Highlight active section with IntersectionObserver
  const links = Array.from(list.querySelectorAll('.toc-link'));
  const map = Object.fromEntries(links.map(l => [l.getAttribute('href').slice(1), l]));

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const id = entry.target.id;
        links.forEach(l => l.classList.toggle('active', l === map[id]));
      }
    });
  }, { rootMargin: '0px 0px -70% 0px', threshold: 0.1 });

  headings.forEach(h => observer.observe(h));
})();
